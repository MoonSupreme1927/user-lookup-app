{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserDetail=()=>{const{id}=useParams();const navigate=useNavigate();const[user,setUser]=useState(null);const[skills,setSkills]=useState([]);const[newSkill,setNewSkill]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const loggedInUser=JSON.parse(localStorage.getItem('loggedInUser'));const isOwner=(loggedInUser===null||loggedInUser===void 0?void 0:loggedInUser._id)===id;useEffect(()=>{const fetchUserAndSkills=async()=>{try{const[userRes,skillRes]=await Promise.all([axios.get(`https://user-lookup-app.onrender.com/users/${id}`),axios.get(`https://user-lookup-app.onrender.com/skills/${id}`)]);setUser(userRes.data);setSkills(skillRes.data.skills||[]);}catch(err){console.error(err);setError('Failed to fetch user details');}finally{setLoading(false);}};fetchUserAndSkills();},[id]);const handleAddSkill=async()=>{const trimmed=newSkill.trim();if(!trimmed||skills.includes(trimmed))return setNewSkill('');try{const res=await axios.post(`https://user-lookup-app.onrender.com/skills/${id}`,{skill:trimmed});setSkills(res.data.skills);setNewSkill('');}catch(err){console.error('Failed to add skill:',err);}};const handleRemoveSkill=async skillToRemove=>{try{const res=await axios.delete(`https://user-lookup-app.onrender.com/skills/${id}/${skillToRemove}`);setSkills(res.data.skills);}catch(err){console.error('Failed to remove skill:',err);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"No user found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>navigate('/'),children:\"\\u2B05\\uFE0F Back to Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDC64 Contact Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",user.phone]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"skills-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCBC Skills\"}),skills.length>0?/*#__PURE__*/_jsx(\"ul\",{children:skills.map((skill,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[skill,isOwner&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveSkill(skill),className:\"remove-skill-btn\",children:\"\\u274C\"})]},idx))}):/*#__PURE__*/_jsx(\"p\",{children:\"No skills listed.\"}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-skill-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add a new skill\",value:newSkill,onChange:e=>setNewSkill(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddSkill,children:\"\\u2795 Add\"})]})]})]})});};export default UserDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","UserDetail","id","navigate","user","setUser","skills","setSkills","newSkill","setNewSkill","loading","setLoading","error","setError","loggedInUser","JSON","parse","localStorage","getItem","isOwner","_id","fetchUserAndSkills","userRes","skillRes","Promise","all","get","data","err","console","handleAddSkill","trimmed","trim","includes","res","post","skill","handleRemoveSkill","skillToRemove","delete","children","className","onClick","name","email","phone","length","map","idx","type","placeholder","value","onChange","e","target"],"sources":["C:/Users/naeem/OneDrive/Documents/IPQS SCRIPTS/Projects/user-lookup-app-1/frontend/src/UserDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst UserDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [user, setUser] = useState(null);\r\n  const [skills, setSkills] = useState([]);\r\n  const [newSkill, setNewSkill] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));\r\n  const isOwner = loggedInUser?._id === id;\r\n\r\n  useEffect(() => {\r\n    const fetchUserAndSkills = async () => {\r\n      try {\r\n        const [userRes, skillRes] = await Promise.all([\r\n          axios.get(`https://user-lookup-app.onrender.com/users/${id}`),\r\n          axios.get(`https://user-lookup-app.onrender.com/skills/${id}`),\r\n        ]);\r\n\r\n        setUser(userRes.data);\r\n        setSkills(skillRes.data.skills || []);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Failed to fetch user details');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserAndSkills();\r\n  }, [id]);\r\n\r\n  const handleAddSkill = async () => {\r\n    const trimmed = newSkill.trim();\r\n    if (!trimmed || skills.includes(trimmed)) return setNewSkill('');\r\n\r\n    try {\r\n      const res = await axios.post(`https://user-lookup-app.onrender.com/skills/${id}`, {\r\n        skill: trimmed,\r\n      });\r\n      setSkills(res.data.skills);\r\n      setNewSkill('');\r\n    } catch (err) {\r\n      console.error('Failed to add skill:', err);\r\n    }\r\n  };\r\n\r\n  const handleRemoveSkill = async (skillToRemove) => {\r\n    try {\r\n      const res = await axios.delete(\r\n        `https://user-lookup-app.onrender.com/skills/${id}/${skillToRemove}`\r\n      );\r\n      setSkills(res.data.skills);\r\n    } catch (err) {\r\n      console.error('Failed to remove skill:', err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p className=\"error\">{error}</p>;\r\n  if (!user) return <p>No user found.</p>;\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"detail-container\">\r\n        <div className=\"header\">\r\n          <h1>User Profile</h1>\r\n          <button className=\"btn-secondary\" onClick={() => navigate('/')}>\r\n            ‚¨ÖÔ∏è Back to Search\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"contact-card\">\r\n          <h2>üë§ Contact Info</h2>\r\n          <p><strong>Name:</strong> {user.name}</p>\r\n          <p><strong>Email:</strong> {user.email}</p>\r\n          <p><strong>Phone:</strong> {user.phone}</p>\r\n        </div>\r\n\r\n        <div className=\"skills-card\">\r\n          <h2>üíº Skills</h2>\r\n          {skills.length > 0 ? (\r\n            <ul>\r\n              {skills.map((skill, idx) => (\r\n                <li key={idx}>\r\n                  {skill}\r\n                  {isOwner && (\r\n                    <button onClick={() => handleRemoveSkill(skill)} className=\"remove-skill-btn\">\r\n                      ‚ùå\r\n                    </button>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p>No skills listed.</p>\r\n          )}\r\n\r\n          {isOwner && (\r\n            <div className=\"add-skill-form\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Add a new skill\"\r\n                value={newSkill}\r\n                onChange={(e) => setNewSkill(e.target.value)}\r\n              />\r\n              <button onClick={handleAddSkill}>‚ûï Add</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}